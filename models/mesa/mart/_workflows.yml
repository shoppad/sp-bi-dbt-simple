version: 2
models:
  - name: workflows
    columns:
      - name: workflow_id
        tests:
          - unique
          - not_null
      - name: shop_subdomain
        tests:
          - not_null
          - relationships:
              field: shop_subdomain
              to: ref('shops')
      - name: template_name
        description: the name of the template the workflow originated from.

      - name: shop_subdomain
      - name: title
      - name: is_premium
      - name: description
      - name: key
      - name: tags
      - name: step_count
        tests:
          - dbt_utils.accepted_range:
              max_value: 40
      - name: first_run_at_pt
      - name: first_successful_run_at_pt
      - name: run_start_count
      - name: run_success_count
      - name: is_enabled
      - name: first_test_at_pt
      - name: first_successful_test_at_pt
      - name: test_start_count
        tests:
          - not_null
      - name: test_success_count
        tests:
          - not_null

      - name: has_edited_or_saved_workflow
        tests:
          - not_null
      - name: has_viewed_workflow
        tests:
          - not_null
      - name: has_enabled_workflow
        tests:
          - not_null
      - name: created_at_pt
        tests:
          - not_null
      - name: updated_at_pt
        tests:
          - not_null
      - name: enable_count
        tests:
          - not_null
      - name: save_count
        tests:
          - not_null
      - name: has_tested_workflow
        tests:
          - not_null
      - name: has_tested_successfully_workflow
        tests:
          - not_null
      - name: page_view_count
