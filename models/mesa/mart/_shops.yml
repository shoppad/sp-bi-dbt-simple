version: 2
models:
  - name: shops
    description: "Formatted, production-ready Shops."
    tests:
      - dbt_expectations.expect_table_row_count_to_be_between:
          min_value: 4000

    columns:
      - name: shop_id
        tests:
          - not_null
          - unique
      - name: shop_subdomain
        tests:
          - not_null
          - unique
      - name: first_installed_at
        tests:
          - not_null
      - name: currency
        tests:
          - not_null

      - name: SHOPIFY_PLAN_NAME
      - name: INSTALL_STATUS
      - name: AUTHTOKEN
      - name: STATUS
      - name: SCOPES
      - name: THEMES
      - name: REFERRAL
      - name: METHOD
      - name: META
      - name: HANDLE
      - name: MONGOID
      - name: TIMESTAMP
      - name: METABASE
      - name: LATEST_INSTALLED_AT
      - name: BILLING_METHOD_NAME
      - name: BILLING_OVERAGE_BUCKET_START_DATE_PT
      - name: BILLING_OVERAGE_BUCKET_END_DATE_PT
      - name: BILLING_OVERAGE_BYPASS_UNTIL
      - name: BILLING_OVERAGE_LAST_COUNT
      - name: BILLING_PLAN_DAYS_COMPLETE
      - name: BILLING_PLAN_ID
      - name: BILLING_PLAN_PERCENT_COMPLETE
      - name: BILLING_PLAN_PERCENT_USED
      - name: BILLING_PLAN_START_DATE_PT
      - name: BILLING_PLAN_END_DATE_PT
      - name: BILLING_PLAN_STATUS
      - name: BILLING_PLAN_USED
      - name: BILLING_PLAN_NAME
      - name: BILLING_METHOD_SHOPIFY_ID
      - name: BILLING_PLAN_TRIAL_DAYS
      - name: BILLING_PLAN_TRIAL_ENDS_PT
      - name: BILLING_PLAN_UPDATED_AT_PT
      - name: BILLING_PLAN_BILLING_ON_PT
      - name: BILLING_PLAN_OVERLIMIT_DATE_PT
      - name: BILLING_PLAN_BALANCE_REMAINING
      - name: BILLING_METHOD_CHARGEBEE_ID
      - name: BILLING_PLAN_VOLUME
      - name: BILLING_PLAN_INTERVAL
      - name: BILLING_PLAN_PRICE
      - name: BILLING_PLAN_CREATED_AT_PT
      - name: BILLING_PLAN_BALANCE_USED
      - name: BILLING_PLAN_TYPE
      - name: DAILY_PLAN_REVENUE
      - name: PRICE_PER_ACTION
      - name: WORKFLOW_COUNT
      - name: TOTAL_TRIGGER_RUNS_COUNT
      - name: TOTAL_SUCCESSFUL_WORKFLOW_RUN_COUNT
      - name: ACTIVATION_DATE_PT
      - name: IS_ACTIVATED
