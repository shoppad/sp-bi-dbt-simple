version: 2
models:
  - name: shops
    description: "formatted, production-ready shops."
    tests:
      - dbt_expectations.expect_table_row_count_to_be_between:
          min_value: 4000

    columns:
      - name: shop_subdomain
        tests:
          - not_null
          - unique
      - name: first_installed_at
        tests:
          - not_null
      - name: currency
        tests:
          - not_null
      - name: workflows_successfully_run_count
        tests:
          - not_null
      - name: workflows_created_count
        tests:
          - not_null
      - name: workflows_enabled_count
        tests:
          - not_null

      - name: shopify_plan_name
      - name: install_status
      - name: status
      - name: referral
      - name: method
      - name: meta
      - name: handle
      - name: timestamp
      - name: latest_installed_at
      - name: billing_method_name
      - name: billing_overage_bucket_start_date_pt
      - name: billing_overage_bucket_end_date_pt
      - name: billing_overage_bypass_until
      - name: billing_overage_last_count
      - name: daily_plan_revenue
      - name: price_per_action
      - name: total_trigger_runs_count
      - name: total_successful_workflow_run_count
      - name: activation_date_pt
      - name: is_activated
      - name: templates_installed_count
      - name: BALANCE_USED
      - name: SHOPIFY_ID
      - name: ORDERS_CURRENT_COUNT
      - name: PLAN_PRICE
      - name: PLAN_USED
      - name: PERCENT_COMPLETE
      - name: BILLING_ON_PT
      - name: PLAN_NAME
      - name: PERCENT_USED
      - name: OVERLIMIT_DATE_PT
      - name: BALANCE_REMAINING
      - name: ORDERS_INITIAL_COUNT
      - name: START_DATE_PT
      - name: END_DATE_PT
      - name: REVENUE_INITIAL_TOTAL
      - name: CREATED_AT_PT
      - name: TRIAL_ENDS_PT
      - name: CHARGEBEE_ID
      - name: UPDATED_AT_PT
      - name: PLAN_TYPE
      - name: DAYS_COMPLETE
      - name: PLAN_ID
      - name: REVENUE_CURRENT_TOTAL
      - name: PLAN_INTERVAL
      - name: TRIAL_DAYS
