version: 2
models:
  - name: workflow_steps
    description: This table contains the individual Steps of a Workflow.
    meta:
      metabase.caveats: |
        Some records are for Deleted Workflows, so be sure to filter on is_deleted.
    columns:
      - name: workflow_step_id
        tests:
          - unique
          - not_null
      - name: shop_subdomain
        tests:
          - not_null
          - relationships:
              to: ref('shops')
              field: shop_subdomain
      - name: integration_app
      - name: workflow_id
        tests:
          - not_null
          - relationships:
              to: ref('workflows')
              field: workflow_id
      - name: step_type
        tests:
          - not_null
      - name: step_weight
      - name: position_in_workflow
      - name: is_deleted
        tests:
          - not_null
