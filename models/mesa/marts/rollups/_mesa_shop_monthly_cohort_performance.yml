version: 2
models:
  - name: mesa_shop_monthly_cohort_performance
    description:
      "This model calculates the funnel performance of the monthly cohorts
      of Shop installs.

      "
    columns:
      - name: cohort_month
        description: The month of the Shop's first app installation.
        data_tests:
          - not_null
          - unique
      - name: cohort_size
        description: The number of users who first installed in the given month.
        data_tests:
          - not_null
      - name: total_ltv_revenue
        description:
          The total revenue generated by users who first installed in the given
          week.
        data_tests:
          - not_null
      - name: has_a_workflow_count
        description:
          The number of users who first installed in the given month and have
          a workflow.
        data_tests:
          - not_null
      - name: has_enabled_a_workflow_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.9
      - name: is_activated_count
        description:
          The number of users who first installed in the given month and are
          activated.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.9
      - name: has_a_workflow_pct
        description:
          The percentage of users who first installed in the given month and
          have a workflow.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: workflow_enabling_incremental_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow, compared to only having a workflow.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: workflow_enabling_cohort_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow, compared to the cohort size.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: activation_cohort_pct
        description:
          The percentage of users who first installed in the given month and
          are activated, compared to the cohort size.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: activation_incremental_pct
        description:
          The percentage of users who first installed in the given month and
          are activated, compared to only enabling a workflow.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: lifetime_value_installed
        description:
          The average revenue generated by users who first installed in the
          given month.
        data_tests:
          - not_null
      - name: lifetime_value_has_a_workflow
        description:
          The average revenue generated by users who first installed in the
          given month and have a workflow.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: lifetime_value_enabled_workflow
        description:
          The average revenue generated by users who first installed in the
          given month and have enabled a workflow.
        data_tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.5
      - name: lifetime_value_activated
        description:
          The average revenue generated by users who first installed in the
          given month and are activated.
        # data_tests:
        #   - dbt_utils.not_null_proportion:
        #       at_least: 0.5
      - name: is_activated_count
        description:
          The number of users who first installed in the given month and are
          activated.
      - name: activation_incremental_pct
        description:
          The percentage of users who first installed in the given month and
          are activated, compared to only enabling a workflow.
      - name: has_workflow_enabled_first_day_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first day.
      - name: has_workflow_enabled_first_year_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first year.
      - name: has_workflow_enabled_first_three_days_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first three days.
      - name: has_workflow_enabled_first_week_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first month.
      - name: has_workflow_enabled_first_six_months_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first six months.
      - name: has_workflow_enabled_first_week_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first month.
      - name: has_workflow_enabled_first_two_weeks_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first two months.
      - name: has_workflow_enabled_first_month_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first month.
      - name: has_workflow_enabled_first_day_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first day.
      - name: has_workflow_enabled_first_two_months_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first two months.
      - name: has_workflow_enabled_first_three_days_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first three days.
      - name: has_workflow_enabled_first_three_months_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first three months.
      - name: has_workflow_enabled_first_two_days_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first two days.
      - name: has_workflow_enabled_first_month_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first month.
      - name: has_workflow_enabled_first_two_months_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first two months.
      - name: has_workflow_enabled_first_six_months_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first six months.
      - name: has_workflow_enabled_first_three_months_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first three months.
      - name: has_workflow_enabled_first_two_weeks_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first two months.
      - name: has_workflow_enabled_first_two_days_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first two days.
      - name: has_workflow_enabled_first_year_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first year.
      - name: lifetime_value_activated
        description:
          The average revenue generated by users who first installed in the
          given month and are activated.
      - name: activation_incremental_pct
        description:
          The percentage of users who first installed in the given month and
          are activated, compared to only enabling a workflow.
      - name: workflow_enabling_cohort_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow, compared to the cohort size.
      - name: has_workflow_first_year_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first year.
      - name: ever_paid_plan_count
        description:
          The number of users who first installed in the given month and have
          ever paid for a plan.
      - name: has_workflow_first_week_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first month.
      - name: has_workflow_first_week_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first month.
      - name: has_workflow_first_year_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first year.
      - name: paid_plan_first_day_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first day.
      - name: paid_plan_first_month_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first month.
      - name: paid_plan_first_three_months_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first three months.
      - name: paid_plan_first_two_days_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first two days.
      - name: ever_paid_plan_pct
        description:
          The percentage of users who first installed in the given month and
          have ever paid for a plan.
      - name: has_workflow_first_day_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first day.
      - name: paid_plan_first_week_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first month.
      - name: has_workflow_first_two_days_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first two days.
      - name: paid_plan_first_year_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first year.
      - name: has_workflow_first_three_days_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first three days.
      - name: paid_plan_first_two_weeks_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first two months.
      - name: has_workflow_first_two_months_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first two months.
      - name: paid_plan_first_two_weeks_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first two months.
      - name: paid_plan_first_two_months_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first two months.
      - name: has_workflow_first_day_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first day.
      - name: paid_plan_first_six_months_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first six months.
      - name: has_workflow_first_six_months_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first six months.
      - name: has_workflow_first_two_days_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first two days.
      - name: paid_plan_first_week_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first month.
      - name: has_workflow_first_month_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first month.
      - name: paid_plan_first_six_months_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first six months.
      - name: has_workflow_first_three_days_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first three days.
      - name: has_workflow_first_two_weeks_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first two months.
      - name: has_workflow_first_three_months_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first three months.
      - name: has_workflow_first_month_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first month.
      - name: paid_plan_first_day_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first day.
      - name: paid_plan_first_year_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first year.
      - name: paid_plan_first_month_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first month.
      - name: has_workflow_first_two_months_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first two months.
      - name: has_workflow_first_two_weeks_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first two months.
      - name: has_workflow_first_three_months_count
        description:
          The number of users who first installed in the given month and have
          enabled a workflow within the first three months.
      - name: paid_plan_first_three_days_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first three days.
      - name: paid_plan_first_three_months_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first three months.
      - name: paid_plan_first_three_days_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first three days.
      - name: paid_plan_first_two_months_pct
        description:
          The percentage of users who first installed in the given month and
          have paid for a plan within the first two months.
      - name: paid_plan_first_two_days_count
        description:
          The number of users who first installed in the given month and have
          paid for a plan within the first two days.
      - name: has_workflow_first_six_months_pct
        description:
          The percentage of users who first installed in the given month and
          have enabled a workflow within the first six months.
      - name: shopify_unlimited_plan_count
        description: The number of users who have a Shopify Unlimited plan.
      - name: shopify_basic_plan_count
        description: The number of users who have a Shopify Basic plan.
      - name: shopify_trial_plan_count
        description: The number of users who have a Shopify Trial plan.
      - name: shopify_unlimited_plan_pct
        description: The percentage of users who have a Shopify Unlimited plan.
      - name: shopify_professional_plan_pct
        description: The percentage of users who have a Shopify Professional plan.
      - name: shopify_shopify_plus_plan_pct
        description: The percentage of users who have a Shopify Plus plan.
      - name: shopify_professional_plan_count
        description: The number of users who have a Shopify Professional plan.
      - name: shopify_trial_plan_pct
        description: The percentage of users who have a Shopify Trial plan.
      - name: shopify_basic_plan_pct
        description: The percentage of users who have a Shopify Basic plan.
      - name: shopify_shopify_plus_plan_count
        description: The number of users who have a Shopify Plus plan.
      - name: has_done_a_trial_count
      - name: ever_did_trial_pct
